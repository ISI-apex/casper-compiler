include(casper)

# TODO: temporary: copy mocked up versions of files that should eventually be
# generated by the compiler.
set(MOCK_FILES
	halide_blur_i7_candidates.small.csv
	tf_models/model.pb
	tf_models/my-model.ckpt.data-00000-of-00001
	tf_models/my-model.ckpt.index
	tf_models/my-model.ckpt.meta)
foreach(mfile ${MOCK_FILES})
	configure_file(${mfile} ${mfile} COPYONLY)
endforeach()

casper_add_exec(blur blur.meta
  SOURCES blur.meta.cpp halide_kern.meta.cpp
  C_KERNEL_SOURCES kern.c
  BUILD_DIR target)

# Run the target program (test target)
add_custom_target(blur_run COMMAND target/blur DEPENDS target/blur)
